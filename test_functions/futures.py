import concurrent.futures
import requests
from dotenv import load_dotenv
import os
import time

load_dotenv('private/.env')

api_key = os.getenv('API_KEY')
url = os.getenv('url')

global_params = {
    "wstoken": api_key,
    "moodlewsrestformat": "json"
}

resultados = [('01', 'I   ', 250, '2022-19-02-01-I   '), ('01', 'II  ', 250, '2022-19-02-01-II  '), ('01', 'III ', 250, '2022-19-02-01-III '), ('01', 'IX  ', 250, '2022-19-02-01-IX  '), ('01', 'V   ', 250, '2022-19-02-01-V   '), ('01', 'VI  ', 250, '2022-19-02-01-VI  '), ('01', 'VII ', 250, '2022-19-02-01-VII '), ('01', 'VIII', 250, '2022-19-02-01-VIII'), ('01', 'X   ', 250, '2022-19-02-01-X   '), ('02', 'I   ', 251, '2022-19-04-02-I   '), ('02', 'II  ', 251, '2022-19-04-02-II  '), ('02', 'III ', 251, '2022-19-04-02-III '), ('02', 'IV  ', 251, '2022-19-04-02-IV  '), ('02', 'IX  ', 251, '2022-19-04-02-IX  '), ('02', 'V   ', 251, '2022-19-04-02-V   '), ('02', 'VI  ', 251, '2022-19-04-02-VI  '), ('02', 'VII ', 251, '2022-19-04-02-VII '), ('02', 'VIII', 251, '2022-19-04-02-VIII'), ('02', 'X   ', 251, '2022-19-04-02-X   '), ('03', 'I   ', 252, '2022-19-02-03-I   '), ('03', 'II  ', 252, '2022-19-02-03-II  '), ('03', 'III ', 252, '2022-19-02-03-III '), ('03', 'IV  ', 252, '2022-19-02-03-IV  '), ('03', 'IX  ', 252, '2022-19-02-03-IX  '), ('03', 'V   ', 252, '2022-19-02-03-V   '), ('03', 'VI  ', 252, '2022-19-02-03-VI  '), ('03', 'VII ', 252, '2022-19-02-03-VII '), ('03', 'VIII', 252, '2022-19-02-03-VIII'), ('03', 'X   ', 252, '2022-19-02-03-X   '), ('04', 'I   ', 253, '2022-19-01-04-I   '), ('04', 'II  ', 253, '2022-19-01-04-II  '), ('04', 'III ', 253, '2022-19-01-04-III '), ('04', 'IV  ', 253, '2022-19-01-04-IV  '), ('04', 'IX  ', 253, '2022-19-01-04-IX  '), ('04', 'V   ', 253, '2022-19-01-04-V   '), ('04', 'VI  ', 253, '2022-19-01-04-VI  '), ('04', 'VII ', 253, '2022-19-01-04-VII '), ('04', 'VIII', 253, '2022-19-01-04-VIII'), ('04', 'X   ', 253, '2022-19-01-04-X   '), ('05', 'I   ', 254, '2022-19-01-05-I   '), ('05', 'II  ', 254, '2022-19-01-05-II  '), ('05', 'III ', 254, '2022-19-01-05-III '), ('05', 'IV  ', 254, '2022-19-01-05-IV  '), ('05', 'IX  ', 254, '2022-19-01-05-IX  '), ('05', 'V   ', 254, '2022-19-01-05-V   '), ('05', 'VII ', 254, '2022-19-01-05-VII '), ('05', 'X   ', 254, '2022-19-01-05-X   '), ('06', 'I   ', 255, '2022-19-05-06-I   '), ('06', 'III ', 255, '2022-19-05-06-III '), ('06', 'IV  ', 255, '2022-19-05-06-IV  '), ('06', 'IX  ', 255, '2022-19-05-06-IX  '), ('06', 'V   ', 255, '2022-19-05-06-V   '), ('06', 'VI  ', 255, '2022-19-05-06-VI  '), ('06', 'VII ', 255, '2022-19-05-06-VII '), ('06', 'VIII', 255, '2022-19-05-06-VIII'), ('06', 'X   ', 255, '2022-19-05-06-X   '), ('07', 'I   ', 256, '2022-19-05-07-I   '), ('07', 'III ', 256, '2022-19-05-07-III '), ('07', 'IV  ', 256, '2022-19-05-07-IV  '), ('07', 'IX  ', 256, '2022-19-05-07-IX  '), ('07', 'V   ', 256, '2022-19-05-07-V   '), ('07', 'VI  ', 256, '2022-19-05-07-VI  '), ('07', 'VII ', 256, '2022-19-05-07-VII '), ('07', 'VIII', 256, '2022-19-05-07-VIII'), ('07', 'X   ', 256, '2022-19-05-07-X   '), ('08', 'I   ', 257, '2022-19-06-08-I   '), ('08', 'II  ', 257, '2022-19-06-08-II  '), ('08', 'III ', 257, '2022-19-06-08-III '), ('08', 'IV  ', 257, '2022-19-06-08-IV  '), ('08', 'IX  ', 257, '2022-19-06-08-IX  '), ('08', 'V   ', 257, '2022-19-06-08-V   '), ('08', 'VI  ', 257, '2022-19-06-08-VI  '), ('08', 'VII ', 257, '2022-19-06-08-VII '), ('08', 'VIII', 257, '2022-19-06-08-VIII'), ('08', 'X   ', 257, '2022-19-06-08-X   '), ('09', 'I   ', 258, '2022-19-07-09-I   '), ('09', 'II  ', 258, '2022-19-07-09-II  '), ('09', 'III ', 258, '2022-19-07-09-III '), ('09', 'IV  ', 258, '2022-19-07-09-IV  '), ('09', 'IX  ', 258, '2022-19-07-09-IX  '), ('09', 'V   ', 258, '2022-19-07-09-V   '), ('09', 'VI  ', 258, '2022-19-07-09-VI  '), ('09', 'VII ', 258, '2022-19-07-09-VII '), ('09', 'VIII', 258, '2022-19-07-09-VIII'), ('09', 'X   ', 258, '2022-19-07-09-X   '), ('10', 'I   ', 259, '2022-19-08-10-I   '), ('10', 'III ', 259, '2022-19-08-10-III '), ('10', 'IX  ', 259, '2022-19-08-10-IX  '), ('10', 'V   ', 259, '2022-19-08-10-V   '), ('10', 'VI  ', 259, '2022-19-08-10-VI  '), ('10', 'VII ', 259, '2022-19-08-10-VII '), ('10', 'X   ', 259, '2022-19-08-10-X   '), ('11', 'I   ', 260, '2022-19-08-11-I   '), ('11', 'II  ', 260, '2022-19-08-11-II  '), ('11', 'III ', 260, '2022-19-08-11-III '), ('11', 'IV  ', 260, '2022-19-08-11-IV  '), ('11', 'VI  ', 260, '2022-19-08-11-VI  '), ('11', 'VIII', 260, '2022-19-08-11-VIII'), ('11', 'X   ', 260, '2022-19-08-11-X   '), ('12', 'I   ', 261, '2022-19-12-12-I   '), ('12', 'II  ', 261, '2022-19-12-12-II  '), ('12', 'III ', 261, '2022-19-12-12-III '), ('12', 'IV  ', 261, '2022-19-12-12-IV  '), ('12', 'IX  ', 261, '2022-19-12-12-IX  '), ('12', 'V   ', 261, '2022-19-12-12-V   '), ('12', 'VI  ', 261, '2022-19-12-12-VI  '), ('12', 'VII ', 261, '2022-19-12-12-VII '), ('12', 'VIII', 261, '2022-19-12-12-VIII'), ('12', 'X   ', 261, '2022-19-12-12-X   '), ('13', 'I   ', 262, '2022-19-03-13-I   '), ('13', 'III ', 262, '2022-19-03-13-III '), ('13', 'IX  ', 262, '2022-19-03-13-IX  '), ('13', 'V   ', 262, '2022-19-03-13-V   '), ('13', 'VII ', 262, '2022-19-03-13-VII '), ('13', 'X   ', 262, '2022-19-03-13-X   '), ('14', 'I   ', 263, '2022-19-12-14-I   '), ('14', 'III ', 263, '2022-19-12-14-III '), ('14', 'IX  ', 263, '2022-19-12-14-IX  '), ('14', 'V   ', 263, '2022-19-12-14-V   '), ('14', 'VII ', 263, '2022-19-12-14-VII '), ('14', 'VIII', 263, '2022-19-12-14-VIII'), ('14', 'X   ', 263, '2022-19-12-14-X   '), ('15', 'I   ', 264, '2022-19-03-15-I   '), ('15', 'III ', 264, '2022-19-03-15-III '), ('15', 'IX  ', 264, '2022-19-03-15-IX  '), ('15', 'V   ', 264, '2022-19-03-15-V   '), ('15', 'VII ', 264, '2022-19-03-15-VII '), ('15', 'X   ', 264, '2022-19-03-15-X   '), ('16', 'I   ', 265, '2022-19-10-16-I   '), ('16', 'III ', 265, '2022-19-10-16-III '), ('16', 'IX  ', 265, '2022-19-10-16-IX  '), ('16', 'V   ', 265, '2022-19-10-16-V   '), ('16', 'VII ', 265, '2022-19-10-16-VII '), ('16', 'X   ', 265, '2022-19-10-16-X   '), ('16', 'XI  ', 265, '2022-19-10-16-XI  '), ('16', 'XII ', 265, '2022-19-10-16-XII '), ('19', 'E   ', 274, '2022-19-11-19-E   '), ('19', 'EC  ', 274, '2022-19-11-19-EC  '), ('19', 'I   ', 274, '2022-19-11-19-I   '), ('19', 'III ', 274, '2022-19-11-19-III '), ('19', 'IX  ', 274, '2022-19-11-19-IX  '), ('19', 'V   ', 274, '2022-19-11-19-V   '), ('19', 'VII ', 274, '2022-19-11-19-VII '), ('21', 'EC  ', 271, '2022-19-11-21-EC  '), ('21', 'ES  ', 271, '2022-19-11-21-ES  '), ('21', 'I   ', 271, '2022-19-11-21-I   '), ('21', 'III ', 271, '2022-19-11-21-III '), ('21', 'IX  ', 271, '2022-19-11-21-IX  '), ('21', 'V   ', 271, '2022-19-11-21-V   '), ('21', 'VII ', 271, '2022-19-11-21-VII '), ('21', 'VIII', 271, '2022-19-11-21-VIII'), ('24', 'I   ', 267, '2022-19-11-24-I   '), ('24', 'III ', 267, '2022-19-11-24-III '), ('24', 'IX  ', 267, '2022-19-11-24-IX  '), ('24', 'V   ', 267, '2022-19-11-24-V   '), ('24', 'VII ', 267, '2022-19-11-24-VII '), ('24', 'X   ', 267, '2022-19-11-24-X   '), ('25', 'I   ', 268, '2022-19-01-25-I   '), ('25', 'II  ', 268, '2022-19-01-25-II  '), ('25', 'III ', 268, '2022-19-01-25-III '), ('25', 'IX  ', 268, '2022-19-01-25-IX  '), ('25', 'V   ', 268, '2022-19-01-25-V   '), ('25', 'VII ', 268, '2022-19-01-25-VII '), ('25', 'VIII', 268, '2022-19-01-25-VIII'), ('25', 'X   ', 268, '2022-19-01-25-X   '), ('28', 'E   ', 275, '2022-19-11-28-E   '), ('28', 'ES  ', 275, '2022-19-11-28-ES  '), ('28', 'I   ', 275, '2022-19-11-28-I   '), ('28', 'III ', 275, '2022-19-11-28-III '), ('28', 'IX  ', 275, '2022-19-11-28-IX  '), ('28', 'V   ', 275, '2022-19-11-28-V   '), ('28', 'VII ', 275, '2022-19-11-28-VII '), ('28', 'VIII', 275, '2022-19-11-28-VIII'), ('29', 'E   ', 270, '2022-19-11-29-E   '), ('29', 'ES  ', 270, '2022-19-11-29-ES  '), ('29', 'I   ', 270, '2022-19-11-29-I   '), ('29', 'III ', 270, '2022-19-11-29-III '), ('29', 'IX  ', 270, '2022-19-11-29-IX  '), ('29', 'V   ', 270, '2022-19-11-29-V   '), ('29', 'VII ', 270, '2022-19-11-29-VII '), ('34', 'I   ', 272, '2022-19-11-34-I   '), ('34', 'III ', 272, '2022-19-11-34-III '), ('34', 'IX  ', 272, '2022-19-11-34-IX  '), ('34', 'V   ', 272, '2022-19-11-34-V   '), ('34', 'VII ', 272, '2022-19-11-34-VII '), ('34', 'VIII', 272, '2022-19-11-34-VIII'), ('34', 'X   ', 272, '2022-19-11-34-X   '), ('35', 'I   ', 273, '2022-19-04-35-I   '), ('35', 'II  ', 273, '2022-19-04-35-II  '), ('35', 'III ', 273, '2022-19-04-35-III '), ('35', 'IV  ', 273, '2022-19-04-35-IV  '), ('35', 'IX  ', 273, '2022-19-04-35-IX  '), ('35', 'V   ', 273, '2022-19-04-35-V   '), ('35', 'VII ', 273, '2022-19-04-35-VII '), ('35', 'X   ', 273, '2022-19-04-35-X   '), ('36', 'I   ', 276, '2022-19-07-36-I   '), ('36', 'II  ', 276, '2022-19-07-36-II  '), ('36', 'III ', 276, '2022-19-07-36-III '), ('36', 'IV  ', 276, '2022-19-07-36-IV  '), ('36', 'IX  ', 276, '2022-19-07-36-IX  '), ('36', 'V   ', 276, '2022-19-07-36-V   '), ('36', 'VII ', 276, '2022-19-07-36-VII '), ('36', 'VIII', 276, '2022-19-07-36-VIII'), ('36', 'X   ', 276, '2022-19-07-36-X   ')]
session = requests.Session()

def crear_sub_categoria(params):
    response = session.post(f"{url}", params=params).json()
    return response

def crear_cat_ciclos():
    try:
        list_params = [{
            "wsfunction": "core_course_create_categories",
            "categories[0][name]": resultado[1],
            "categories[0][idnumber]": resultado[3],
            "categories[0][description]": resultado[1],
            "categories[0][parent]": resultado[2]
        } for resultado in resultados]
        params_list = [{**global_params, **params} for params in list_params]
        with concurrent.futures.ThreadPoolExecutor() as executor:
            responses = list(executor.map(crear_sub_categoria, params_list))
        return responses
    except Exception as e:
        return f'Fallaste {e}'


inicio = time.time()
crear_cat_ciclos()
fin = time.time()

print(f"Tiempo de ejecuci√≥n: {fin - inicio} segundos")